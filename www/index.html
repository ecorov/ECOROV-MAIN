<!DOCTYPE html>
<html>

<head>
  <title>RPi ROV</title>
	<link rel="stylesheet" href="css/jquery-ui.css"> 
	<link rel="stylesheet" href="css/style.css"> 	
	<script src="js/jquery-1.10.2.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/jquery.ui.touch-punch.min.js"></script>
	
<script type="text/javascript">

/* Copyright (C) 2007 Richard Atterer, richardÂ©atterer.net
   This program is free software; you can redistribute it and/or modify it
   under the terms of the GNU General Public License, version 2. See the file
   COPYING for details. */

var imageNr = 0; // Serial number of current image
var finished = new Array(); // References to img objects which have finished downloading
var paused = false;

function createImageLayer() {
  var img = new Image();
  img.style.position = "absolute";
  img.style.zIndex = -1;
  img.onload = imageOnload;
  img.onclick = imageOnclick;
  img.src = "./?action=snapshot&n=" + (++imageNr);
  var webcam = document.getElementById("webcam");
  webcam.insertBefore(img, webcam.firstChild);
}

// Two layers are always present (except at the very beginning), to avoid flicker
function imageOnload() {
  this.style.zIndex = imageNr; // Image finished, bring to front!
  while (1 < finished.length) {
    var del = finished.shift(); // Delete old image(s) from document
    del.parentNode.removeChild(del);
  }
  finished.push(this);
  if (!paused) createImageLayer();
}

function imageOnclick() { // Clicking on the image will pause the stream
  paused = !paused;
  if (!paused) createImageLayer();
}

</script>
	
	
</head>

<body onload="createImageLayer();">
	
	
	<div id="CtrlPwd"  style="display:block;">
		Type password to control this ROV: <br>
		<input type="text" id="ctrlpwd">
		<input type="submit" onclick="pwd()" value="Submit">
	</div>
	
	<div id="webcam"><noscript><img src="./?action=snapshot" /></noscript></div>
	<div id="CtrlPannel"  style="display:none;">
		<div id="camera">
			<a id="video_button"><img class="icon" src="img/video-1.png"></a>
			<a id="image_button"><img class="icon" src="img/camera-1.png"></a>
			<a id="timelapse_button"><img class="icon" src="img/timelapse-1.png"></a>
			<a id="led_button"><img class="icon" src="img/led-1.png"></a>
		</div>
		
		<a id="download" href="preview.html"><img class="icon" src="img/download.png"></a>
		
		<div id="system">
			<a id="showsys"><img class="icon" src="img/power.png"></a><br>
			<div id="syscmd" style="display:none;">
				<input id="reboot_button" type="button" value="reboot" onclick="sys_reboot();" ><br><br><br>
				<input id="shutdown_button" type="button" value="shutdown" onclick="sys_shutdown();" >
			</div>
		</div>
		
		<div id="boundary"><div id="ctrlrod"></div></div>
		<p id="debug"></p>
		<div id="slider"></div>
	
	</div>

	<script src="js/ctrl.js"></script>
</body>

</html>

